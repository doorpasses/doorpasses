---
interface Props {
	richText?: any
}

const { richText } = Astro.props

const renderLexicalContent = (content: any) => {
	if (!content || !content.root || !content.root.children) {
		return ''
	}

	return content.root.children
		.map((node: any) => {
			if (node.type === 'paragraph' && node.children) {
				const text = node.children
					.map((child: any) => {
						if (child.format && child.format > 0) {
							let formattedText = child.text || ''
							if (child.format & 1)
								formattedText = `<strong class="font-semibold">${formattedText}</strong>`
							if (child.format & 2)
								formattedText = `<em class="italic">${formattedText}</em>`
							return formattedText
						}
						return child.text || ''
					})
					.join('')
				return `<p class="text-lg text-muted-foreground leading-relaxed">${text}</p>`
			}
			if (node.type === 'heading' && node.children) {
				const text = node.children
					.map((child: any) => child.text || '')
					.join('')
				return `<h1 class="text-2xl md:text-4xl tracking-tight font-title text-foreground leading-tight">${text}</h1>`
			}
			return ''
		})
		.join('')
}
---

<section class="container mt-16 py-8">
	<div class="max-w-3xl space-y-4">
		{richText && (
			<div class="space-y-4" set:html={renderLexicalContent(richText)} />
		)}
	</div>
</section>
